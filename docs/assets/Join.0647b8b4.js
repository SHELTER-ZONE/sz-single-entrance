import{L as f,o as m,d as w,g as a,u as M,b as V,v as D,x as v,c as J,C as L,y as S,i as r,e as n,G as y,M as g,w as o,z as $,t as x,O as j,B as N,p as H,j as O}from"./vendor.84e4c1a2.js";import{a as k}from"./anime.es.729cdde2.js";import{a as z,_ as P}from"./index.f1bca16d.js";const A={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},E=a("path",{d:"M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z",fill:"currentColor"},null,-1);var G=f({name:"Home",render:function(l,c){return m(),w("svg",A,[E])}});const Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},R=a("path",{d:"M16 30a14 14 0 1 1 14-14a14 14 0 0 1-14 14zm0-26a12 12 0 1 0 12 12A12 12 0 0 0 16 4z",fill:"currentColor"},null,-1),Y=a("path",{d:"M20.59 22L15 16.41V7h2v8.58l5 5.01L20.59 22z",fill:"currentColor"},null,-1);var q=f({name:"Time",render:function(l,c){return m(),w("svg",Q,[R,Y])}});const F=async({memberID:e})=>await z({url:"https://sz-bot-dev.deta.dev/cacheData/joinType/temporary ",method:"POST",data:{memberID:e}}),K=async({memberID:e})=>await z({url:"https://sz-bot-dev.deta.dev/cacheData/joinType/permanent ",method:"POST",data:{memberID:e}});const C=e=>(H("data-v-c266812e"),e=e(),O(),e),U={id:"join",class:"page-padding"},W={class:"join-type-wrapper common-width"},X=C(()=>r("div",null,"\u53EA\u662F\u60F3\u8A62\u554F\u4E00\u4E9B\u554F\u984C\uFF0C\u4E26\u7121\u5728\u4F3A\u670D\u5668\u9577\u4E45\u5C45\u4F4F\u7684\u6253\u7B97",-1)),Z=C(()=>r("div",null,"\u6253\u7B97\u5728\u4F3A\u670D\u5668\u9577\u4E45\u5C45\u4F4F\u7684\u6253\u7B97",-1)),ee={class:"mt-[40px]"},te={class:"text-sm"},ae={setup(e){const l=M(),c=V(),_=D(),s=v(""),d=v(""),u=v(!1),p=J(()=>c.state.auth.user.id),b=async()=>{const[h,t]=await K({memberID:p.value});return t?(_.error(t),!1):!0},T=async()=>{const[h,t]=await F({memberID:p.value});return t?(_.error(t),!1):!0},i=()=>{u.value=!1,d.value=""},B=async()=>{if(u.value=!0,d.value="\u767B\u8A18\u8CC7\u6599\u4E2D...",s.value==="temporary"){if(!await T())return i();window.location.href="https://discord.gg/D3MQjxzTgg",i();return}if(s.value==="permanent")return await b()?(i(),l.push({name:"EntryCheck"})):i()};return L(()=>{if(!p.value)return l.replace({name:"Home"});k({targets:".join-type",translateY:[20,0],opacity:[0,1],duration:1e3,delay:k.stagger(150,{start:300})})}),(h,t)=>(m(),S("div",U,[r("div",W,[a(n(y),{title:"\u66AB\u6642\u505C\u7559",class:g(["join-type",{selected:s.value==="temporary"}]),onClick:t[0]||(t[0]=I=>s.value="temporary")},{icon:o(()=>[a(n(j),null,{default:o(()=>[a(n(q))]),_:1})]),default:o(()=>[X]),_:1},8,["class"]),a(n(y),{title:"\u9577\u4E45\u5C45\u7559",class:g(["join-type",{selected:s.value==="permanent"}]),onClick:t[1]||(t[1]=I=>s.value="permanent")},{icon:o(()=>[a(n(j),null,{default:o(()=>[a(n(G))]),_:1})]),default:o(()=>[Z]),_:1},8,["class"])]),r("div",ee,[a(n($),{class:"join-btn",secondary:"",round:"",type:"primary",loading:u.value,disabled:!s.value,onClick:B},{default:o(()=>[N(x(s.value==="permanent"?"\u524D\u5F80\u8A8D\u8B49":"\u52A0\u5165\u4F3A\u670D\u5668"),1)]),_:1},8,["loading","disabled"])]),r("span",te,x(d.value),1)]))}};var re=P(ae,[["__scopeId","data-v-c266812e"]]);export{re as default};
