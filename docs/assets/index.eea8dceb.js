import{u as E,a as v,b as g,c as p,r as y,o as R,d as k,w as _,e as l,f as A,N as S,g as m,h as T,i as f,t as b,p as C,j as O,k as D,l as I,m as P,n as L,q as w,s as N}from"./vendor.f6106948.js";const j=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}};j();var V=(e,t)=>{const a=e.__vccOpts||e;for(const[s,o]of t)a[s]=o;return a};const x=e=>(C("data-v-1c354db0"),e=e(),O(),e),z=x(()=>f("h1",{class:"static-title"},"SHELTER ZONE",-1)),H={class:"page-title"},$={setup(e){const t=E(),a=v(),s=g(),o=p(()=>s.state.pageReaded);t.beforeEach((r,i)=>{r.name==="Rules"&&!o.value.important&&t.replace({name:"Home"}),r.name==="Join"&&!o.value.rules&&t.replace({name:"Home"})});const n=p(()=>{let r=a.name;const i=a.name;return i==="Home"&&(r="About"),i==="EntryCheck"&&(r="\u{1F6A7} Entry Check"),r});return(r,i)=>{const d=y("router-view");return R(),k(l(S),{theme:l(A),class:"w-full h-full overflow-y-auto"},{default:_(()=>[m(l(T),null,{default:_(()=>[z,f("h3",H,b(l(n)),1),m(d)]),_:1})]),_:1},8,["theme"])}}};var U=V($,[["__scopeId","data-v-1c354db0"]]);const G="modulepreload",h={},q="/sz-single-entrance/",c=function(t,a){return!a||a.length===0?t():Promise.all(a.map(s=>{if(s=`${q}${s}`,s in h)return;h[s]=!0;const o=s.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":G,o||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),o)return new Promise((i,d)=>{r.addEventListener("load",i),r.addEventListener("error",d)})})).then(()=>t())},W=[{path:"/",name:"Home",component:()=>c(()=>import("./Home.56bd93e6.js"),["assets/Home.56bd93e6.js","assets/Home.328c1b79.css","assets/vendor.f6106948.js"])},{path:"/callback",name:"Callback",component:()=>c(()=>import("./Callback.45705554.js"),["assets/Callback.45705554.js","assets/vendor.f6106948.js"])},{path:"/important",name:"Important",component:()=>c(()=>import("./Important.aef668b7.js"),["assets/Important.aef668b7.js","assets/Important.514c5e25.css","assets/vendor.f6106948.js","assets/CooldownButton.dc668b6c.js","assets/CooldownButton.2fb762c1.css","assets/anime.es.729cdde2.js"])},{path:"/rules",name:"Rules",component:()=>c(()=>import("./Rules.e8be9027.js"),["assets/Rules.e8be9027.js","assets/vendor.f6106948.js","assets/CooldownButton.dc668b6c.js","assets/CooldownButton.2fb762c1.css","assets/anime.es.729cdde2.js"])},{path:"/join",name:"Join",component:()=>c(()=>import("./Join.0397cdad.js"),["assets/Join.0397cdad.js","assets/Join.e0b34b42.css","assets/vendor.f6106948.js","assets/anime.es.729cdde2.js"])},{path:"/entry-check",name:"EntryCheck",component:()=>c(()=>import("./EntryCheck.dd99b16b.js"),["assets/EntryCheck.dd99b16b.js","assets/EntryCheck.9e475da4.css","assets/vendor.f6106948.js","assets/CooldownButton.dc668b6c.js","assets/CooldownButton.2fb762c1.css"])},{path:"/welcome",name:"Welcome",component:()=>c(()=>import("./Welcome.28fd22f9.js"),["assets/Welcome.28fd22f9.js","assets/vendor.f6106948.js"])}],B=D({routes:W,history:I()}),u=P.create();u.interceptors.request.use(async e=>e);const J=e=>[e.data,null],K=e=>{const t=e.response.data.error.message;return[null,t||e.response.data]};u.interceptors.response.use(J,K);const M=async({redirectUri:e})=>await u({method:"POST",url:"https://sz-bot-dev.deta.dev/oauth/getDCAuthorizeUrl",data:{redirectUri:e}}),F=async({code:e,redirectUri:t})=>await u({method:"POST",url:"https://sz-bot-dev.deta.dev/oauth/getDCAccessToken",data:{code:e,redirectUri:t}}),Z={state:{loggedIn:!1,user:null,accesstoken:null},mutations:{SET_USER:(e,t)=>{e.user=t},SET_ACCESSTOKEN:(e,t)=>{e.accesstoken=t},SET_LOGGEDIN:(e,t)=>{e.loggedIn=t}},actions:{async getDCAuthorizeUrl(){const[e,t]=await M({redirectUri:`${location.protocol}//${location.host}/sz-single-entrance/#/callback`});return t?[null,t]:[e,null]},async getDCAccessToken({commit:e},{code:t}){const[a,s]=await F({code:t,redirectUri:`${location.protocol}//${location.host}/sz-single-entrance/#/callback`});return s?[null,s]:(e("SET_ACCESSTOKEN",a.access_token),[a,null])}}},Q=L({state:{pageReaded:{important:!1,rules:!1}},mutations:{SET_PAGE_READED:(e,t)=>{e.pageReaded[t]=!0}},actions:{},modules:{auth:Z},getters:{haveNoReaded:e=>w(e.pageReaded,!1)}});N(U).use(Q).use(B).mount("#app");export{V as _,u as a};
